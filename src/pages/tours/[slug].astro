---
import Layout from "../../layouts/Layout.astro";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const tourEntries = await getCollection("tours", ({ id }) =>
    id.startsWith("es/")
  );

  return tourEntries.map((entry) => ({
    params: { slug: entry.slug.split("/").pop() },
    props: { entry },
  }));
}

// 2. For your template, you can get the entry directly from the prop
const {
  entry: { data },
} = Astro.props;
---

<Layout>
  <section class="bg-gray-800 relative text-white">
    <div
      class="bg-dark_cyan-500 container mx-auto px-4 py-10 relative md:bg-transparent md:py-32 md:z-50"
    >
      <div class="flex flex-wrap -mx-4">
        <div class="mx-auto px-4 text-center w-full lg:w-8/12">
          <p class="font-medium font-paragraphs mb-2 text-yellow-500 uppercase">
            TOUR
          </p>
          <h1
            class="drop-shadow-xl font-extrabold font-titles mb-4 text-6xl uppercase"
          >
            {data.section_1.title}
          </h1>
          <p class="font-light font-paragraphs mb-6 text-xl">
            {data.section_1.description}
          </p>
        </div>
      </div>
      <div class="mt-10">
        <div class="text-center">
          <button
            class="bg-yellow-500 flex-shrink-0 font-medium font-paragraphs inline-flex items-center px-4 py-2 rounded-lg self-start text-background_cyan-700 text-xl"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              width="1em"
              height="1em"
              class="text-3xl"
            >
              <g>
                <path fill="none" d="M0 0h24v24H0z"></path>
                <path
                  fill-rule="nonzero"
                  d="M7.253 18.494l.724.423A7.953 7.953 0 0 0 12 20a8 8 0 1 0-8-8c0 1.436.377 2.813 1.084 4.024l.422.724-.653 2.401 2.4-.655zM2.004 22l1.352-4.968A9.954 9.954 0 0 1 2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10a9.954 9.954 0 0 1-5.03-1.355L2.004 22zM8.391 7.308c.134-.01.269-.01.403-.004.054.004.108.01.162.016.159.018.334.115.393.249.298.676.588 1.357.868 2.04.062.152.025.347-.093.537a4.38 4.38 0 0 1-.263.372c-.113.145-.356.411-.356.411s-.099.118-.061.265c.014.056.06.137.102.205l.059.095c.256.427.6.86 1.02 1.268.12.116.237.235.363.346.468.413.998.75 1.57 1l.005.002c.085.037.128.057.252.11.062.026.126.049.191.066a.35.35 0 0 0 .367-.13c.724-.877.79-.934.796-.934v.002a.482.482 0 0 1 .378-.127c.06.004.121.015.177.04.531.243 1.4.622 1.4.622l.582.261c.098.047.187.158.19.265.004.067.01.175-.013.373-.032.259-.11.57-.188.733a1.155 1.155 0 0 1-.21.302 2.378 2.378 0 0 1-.33.288 3.71 3.71 0 0 1-.125.09 5.024 5.024 0 0 1-.383.22 1.99 1.99 0 0 1-.833.23c-.185.01-.37.024-.556.014-.008 0-.568-.087-.568-.087a9.448 9.448 0 0 1-3.84-2.046c-.226-.199-.435-.413-.649-.626-.89-.885-1.562-1.84-1.97-2.742A3.47 3.47 0 0 1 6.9 9.62a2.729 2.729 0 0 1 .564-1.68c.073-.094.142-.192.261-.305.127-.12.207-.184.294-.228a.961.961 0 0 1 .371-.1z"
                ></path>
              </g>
            </svg> WhatsApp
          </button>
        </div>
      </div>
    </div>
    <Image
      src={data.section_1.image}
      class="h-full inset-0 object-center object-cover relative w-full md:absolute md:z-0"
      alt="tour image"
    />
  </section>

  <!-- section 2 -->

  <section class="bg-beige-500 mx-auto p-8 md:py-20">
    <div class="flex flex-col mx-auto md:flex-row lg:w-10/12">
      <div class="md:p-10 md:w-1/2">
        <h3
          class="drop-shadow-xl font-extrabold font-titles mb-4 text-3xl text-center uppercase md:text-left"
        >
          {data.section_2.title}
        </h3>
        <p class="font-paragraphs text-center text-lg md:text-left">
          {data.section_2.description}
        </p>
        <div class="mt-10"></div>
        <div class="mt-5">
          <div class="mb-4">
            <p class="mb-2 text-center md:text-left">
              <strong
                class="font-titles text-background_cyan-500 tracking-wider uppercase"
                >{data.section_2.highlights.title}</strong
              >
            </p>
            <ul class="mx-auto text-center w-2/3 md:mx-0 md:text-left">
              {
                data.section_2.highlights.list.map((item) => (
                  <li class="border-b border-background_cyan-500 border-solid font-paragraphs font-semibold p-2 text-background_cyan-500">
                    {item}
                  </li>
                ))
              }
            </ul>
          </div>
          <div class="my-10 text-center md:text-left">
            <button
              class="bg-lime_green-600 flex-shrink-0 font-medium font-paragraphs inline-flex items-center px-4 py-2 rounded-lg self-start text-white text-xl"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                width="1em"
                height="1em"
                class="text-3xl"
              >
                <g>
                  <path fill="none" d="M0 0h24v24H0z"></path>
                  <path
                    fill-rule="nonzero"
                    d="M7.253 18.494l.724.423A7.953 7.953 0 0 0 12 20a8 8 0 1 0-8-8c0 1.436.377 2.813 1.084 4.024l.422.724-.653 2.401 2.4-.655zM2.004 22l1.352-4.968A9.954 9.954 0 0 1 2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10a9.954 9.954 0 0 1-5.03-1.355L2.004 22zM8.391 7.308c.134-.01.269-.01.403-.004.054.004.108.01.162.016.159.018.334.115.393.249.298.676.588 1.357.868 2.04.062.152.025.347-.093.537a4.38 4.38 0 0 1-.263.372c-.113.145-.356.411-.356.411s-.099.118-.061.265c.014.056.06.137.102.205l.059.095c.256.427.6.86 1.02 1.268.12.116.237.235.363.346.468.413.998.75 1.57 1l.005.002c.085.037.128.057.252.11.062.026.126.049.191.066a.35.35 0 0 0 .367-.13c.724-.877.79-.934.796-.934v.002a.482.482 0 0 1 .378-.127c.06.004.121.015.177.04.531.243 1.4.622 1.4.622l.582.261c.098.047.187.158.19.265.004.067.01.175-.013.373-.032.259-.11.57-.188.733a1.155 1.155 0 0 1-.21.302 2.378 2.378 0 0 1-.33.288 3.71 3.71 0 0 1-.125.09 5.024 5.024 0 0 1-.383.22 1.99 1.99 0 0 1-.833.23c-.185.01-.37.024-.556.014-.008 0-.568-.087-.568-.087a9.448 9.448 0 0 1-3.84-2.046c-.226-.199-.435-.413-.649-.626-.89-.885-1.562-1.84-1.97-2.742A3.47 3.47 0 0 1 6.9 9.62a2.729 2.729 0 0 1 .564-1.68c.073-.094.142-.192.261-.305.127-.12.207-.184.294-.228a.961.961 0 0 1 .371-.1z"
                  ></path>
                </g>
              </svg> WhatsApp
            </button>
          </div>
        </div>
      </div>
      <div
        class="flex flex-col overflow-hidden relative md:rounded-lg md:shadow-lg md:shadow-soft_yellow-500 md:w-1/2"
      >
        <iframe
          src={data.section_2.map.src}
          width="600"
          height="450"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          class="h-full w-full"></iframe>
        <div class="bg-opacity-70 bg-soft_yellow-500 flex relative w-full">
          <ul
            class="flex font-bold font-paragraphs justify-around text-center uppercase w-full"
          >
            <li
              class="border-background_cyan-500 border-opacity-50 border-r border-solid h-full p-4 w-full"
            >
              {data.section_2.stats.distance}
            </li>
            <li
              class="border-background_cyan-500 border-opacity-50 border-r border-solid h-full p-4 w-full"
            >
              {data.section_2.stats.duration}
            </li>
            <li class="h-full p-4 w-full">{data.section_2.stats.difficulty}</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="mb-4 py-10">
      <p
        class="font-bold mb-5 text-background_cyan-500 text-center uppercase md:text-center"
      >
        {data.section_3.title}
      </p>
      <ul
        class="mx-auto text-center md:flex md:flex-wrap md:justify-around md:w-2/3"
      >
        {
          data.section_3.inclusions.map((item) => (
            <li class="bg-dark_cyan-500 border-beige-500 border-r border-solid p-2 text-white md:flex-grow">
              {item}
            </li>
          ))
        }
      </ul>
    </div>
  </section>
</Layout>
